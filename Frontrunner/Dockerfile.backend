FROM node:25-alpine

WORKDIR /app

# Install Python and PostgreSQL client for turn path API
RUN apk add --no-cache \
    python3 \
    py3-pip \
    py3-psycopg2 \
    postgresql-client

COPY package.json ./

RUN npm install --legacy-peer-deps

COPY components ./components
COPY lib ./lib
COPY pages ./pages
COPY etl ./etl

EXPOSE 3001

CMD ["npm", "run", "dev"]